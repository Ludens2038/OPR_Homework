package at.fhooe.sail.Lambdas;

import at.fhhgb.mc.opr.backblazedata.model.HardDisk;

import java.util.Vector;

import at.fhhgb.mc.opr.backblazedata.loaders.HardDiskDataSource;
import at.fhhgb.mc.opr.backblazedata.loaders.LiveHardDiskDataSource;

public class MainClass {
	public static void main(String[] args) {
		HardDiskDataSource source = new LiveHardDiskDataSource();
		HardDisk disk;
		Vector<HardDisk> hardDisks = new Vector<>();
		
		while((disk = source.next()) != null) {
			hardDisks.add(disk);
		}
		
		DataProcessorManual processor = new DataProcessorManual(hardDisks);
		
		long driveCount = processor.count();
		System.out.println("Drive Count: " + driveCount);
		
		long failedCount = processor.filter(hdd -> hdd.isFailing()).size();
		System.out.println("Failing Drives Count: " + failedCount);
	}
}
